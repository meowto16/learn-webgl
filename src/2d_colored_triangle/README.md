# 2D Colored Triangle

## GL.createShader(type)

### Описание

Создает объект-шейдер.

### Параметры

#### - type
Указывает тип шейдера, который должен быть создан.
Должен быть `GL_VERTEX_SHADER` или `GL_FRAGMENT_SHADER`.

### Описание

`glCreateShader` создает пустой объект шейдера, и возвращает `non-zero` значение, на которое
можно ссылаться. Объект шейдера содержит `source` код, который описывает шейдер.

- `GL_VERTEX_SHADER` - запускается на `vertex` процессорах
- `GL_FRAGMENT_SHADER` - запускается на `fragment` процессорах

## GL.shaderSource(shader, source)

### Описание

Заменяет `source` код в объекте шейдера.

### Параметры

#### - shader
Указывает объект шейдера, в котором необходимо произвести замену

#### - source
Код шейдера, строка.

## GL.compileShader(shader)

### Описание

Компилирует шейдер в binary-данные, чтобы он мог использоваться в WebGL-программе.

### Параметры

#### - shader
Указывает объект шейдера, который необходимо скомпилировать

## GL.getShaderParameter(shader, pname)

### Описание

Возвращает информацию о шейдере

### Параметры

#### - shader
Указывает объект шейдера, о котором необходимо узнать информацию.

#### - pname
`GLenum` - указывающий информацию, которую нужно запросить. Возможные значения:
- `gl.DELETE_STATUS` - возвращает помечен ли шейдер к удалению
- `gl.COMPILE_STATUS` - возвращает индикатор успешна ли была последняя компиляция шейдера
- `gl.SHADER_TYPE` - возвращает тип шейдера (vertex/fragment)

## GL.getShaderInfoLog(shader)

### Описание
Возвращает информационный лог о выбранном объекте шейдера.
Он содержит варнинги, информацию о дебаге и компиляции.

### Параметры

#### - shader
Указывает объект шейдера, о котором необходимо узнать информацию.

## GL.createProgram()

### Описание
Создает и инициализирует WebGL программу.

WebGL-программа - это комбинация двух шейдеров (вершинного vertex и фрагментного fragment)

## GL.attachShader(program, shader)

### Описание
Прикрепляет vertex или fragment шейдер к WebGL-программе.

### Параметры

#### - program
WebGL-программа, созданная через `GL.createProgram()`

#### - shader
Скомпилированный объект шейдера через `GL.compileShader()`

## GL.linkProgram(program)

### Описание 
Линкует программу 

### Параметры

#### - program
WebGL-программа, созданная через `GL.createProgram()`

## GL.getAttribLocation(program, name)

### Описание
Возвращает адрес атрибута программы (`GLint`). Если не находит - возвращает `-1`.

### Параметры

#### - program
Из какой программы возвращаем атрибут

#### - name
Имя параметра, адрес которого хотим вернуть.

## GL.enableVertexAttribArray(index)

### Описание
Включает vertex-атрибут в указанный index

> Можно также выключить его через `disableVertexAtribArray()`

### Параметры

#### - index
`GLint`, который должен быть получен через `gl.getAttribLocation`. 
Т.е это адрес атрибута программы.

### Заметки

В WebGL значения, которые присваиваются вершинам, хранятся в атрибутах.
Только атрибуты доступны в JS коде и vertex шейдерах. Атрибуты хранятся по index-номеру,
в списке атрибутов поддерживаемых GPU.

Так как атрибуты не могут быть использованы, пока не включены через `gl.enableVertexAttribArray()`,
нужно их включать. После этого можно будет пользоваться методами 
`gl.vertexAttribPointer()`, `gl.vertexAttrib*`, `gl.getVertexAttrib`

## GL.useProgram(program)

### Описание

Указывает WebGL программу как часть текущего рендеринг стейта.

### Параметры

#### - program
WebGL программа для использования.

## GL.createBuffer()

### Описание

Создает `WebGLBuffer`, который хранит данные, вроде вершин или цветов.

## GL.bindBuffer(target, buffer)

### Описание

### Параметры

#### - target
Указывает к какому буфер объекту привязывать. Возможные значения:
- `GL_ARRAY_BUFFER`
- `GL_ELEMENT_ARRAY_BUFFER`

#### - buffer
WebGLBuffer, который нужно привязать.

### Заметки

> Можно получить текущие биндинги с помощью:
> ```js
> gl.getParameter(gl.ARRAY_BUFFER_BINDING);
> gl.getParameter(gl.ELEMENT_ARRAY_BUFFER_BINDING);
> ```

## GL.bufferData(target, srcData, usage)

### Описание

### Параметры

#### - target

`GLenum`, указывающий значение для бинда. Возможные значения:
- `gl.ARRAY_BUFFER`
  - Буффер, содержащий атрибуты вершин, вроде координат вершины, координат текстуры, цвета вершины.
- `gl.ELEMENT_ARRAY_BUFFER`
  - Буффер, использующийся для индексов элементов.

#### - srcData
Сюда можно закинуть `ArrayBuffer`, `SharedArrayBuffer`, `TypedArray`, `DataView` на выбор. Эти данные
будут скопированы в 

#### - usage
`GLenum`, указывающий предназначение буфера. Используется для оптимизации. Возможные значения:
- `gl.STATIC_DRAW`
  - Контент объявляется только раз и используется много раз как источник в WebGL отрисовке 
- `gl.DYNAMIC_DRAW`
  - Контент переназначается повторно в приложении и используется много раз как источник в WebGL отрисовке
- `gl.STREAM_DRAW`
  - Контент объявляется только раз и используется несколько раз как источник в WebGL отрисовке

### Заметки

> Можно получить информацию о буфере
> ```js
> gl.getBufferParameter(gl.ARRAY_BUFFER, gl.BUFFER_SIZE);
> gl.getBufferParameter(gl.ARRAY_BUFFER, gl.BUFFER_USAGE);
> ```

> Можно получить размер типизированного массива
> ```js
> const dataArray = new Float32Array([1, 2, 3, 4]);
> const sizeInBytes = dataArray.length * dataArray.BYTES_PER_ELEMENT;
> ```

## GL.clearColor(red, green, blue, alpha)

### Описание

Указывает, какие цвета будут использоваться при очистке color-буферов.

### Параметры

#### - red
`GLclampf` указывающий красный цвет, когда color-буферы очищаются. Дефолт: 0.0

#### - green
`GLclampf` указывающий зеленый цвет, когда color-буферы очищаются. Дефолт: 0

#### - blue
`GLclampf` указывающий синий цвет, когда color-буферы очищаются. Дефолт: 0

#### - alpha
`GLclampf` указывающий прозрачность, когда color-буферы очищаются. Дефолт: 0

### Заметки

Для получения текущего `clear color` можно использовать:
```js
gl.getParameter(gl.COLOR_CLEAR_VALUE);
// Float32Array[1, 0.5, 0.5, 1]
```

## GL.viewport(x, y, width, height)

### Описание

Устанавливает viewport для canvas.

### Параметры

#### - x
`GLint` - обозначает горизонтальную координату, от левого нижнего угла.

#### - y
`GLint` - обозначает вертикальную координату, от левого нижнего угла.

#### - width
Положительный `GLsizei` - указывающий ширину вьюпорта.

#### - height
Положительный `GLsizei` - указывающий высоту вьюпорта.

### Заметки

```js
gl.getParameter(gl.MAX_VIEWPORT_DIMS);
// e.g. Int32Array[16384, 16384]

gl.getParameter(gl.VIEWPORT);
// e.g. Int32Array[0, 0, 640, 480]
```

## GL.clear(mask)

### Описание
Очищает буферы по значению (mask).

### Параметры

#### - mask
`GLbitfield` - bitwise OR маска, означающая какой буфер очистить. Возможные значения:
- `gl.COLOR_BUFFER_BIT`
- `gl.DEPTH_BUFFER_BIT`
- `gl.STENCIL_BUFFER_BIT`

## GL.vertexAttribPointer()

### Описание
Биндит буфер привязанный к `gl.ARRAY_BUFFER` к вершинному атрибуту 
текущего вершинного буфера и определяет его layout.

Данным методом мы указываем в каком порядке расположены атрибуты в массиве. А также какого они типа данных.

### Параметры

#### - index
`GLint` - указание индекса вершинного атрибута, который нужно модифицировать

#### - size
`GLint` - количество компонентов в вершинном атрибуте. От 1 до 4.

#### - type
`GLenum` - указание какой тип данных используется в массиве. Возможные значения:
- `gl.BYTE` - signed 8-bit integer. [-128, 127]
- `gl.SHORT` - signed 16-bit integer. [-32768, 32767]
- `gl.UNSIGNED_BYTE` - unsigned 8-bit integer. [0, 255],
- `gl.UNSIGNED_SHORT` - unsigned 16-bit integer. [0, 65535]
- `gl.FLOAT` - 32-bit IEEE floating point number

#### - normalized
`GLboolean` указывающий нужно ли нормализовать данные в определенный range, когда кастится к `float`
- Для типов `gl.BYTE` и `gl.SHORT` - нормализует к `[-1, 1]`
- Для типов `gl.UNSIGNED_BYTE` и `gl.UNSIGNED_SHORT` - нормализует к `[0, 1]`
- Для типов `gl.FLOAT` и `gl.HALF_FLOAT` - ничего не делает.

#### - stride
`GLsizei` - указывающий отступ в байтах между началом последовательных вершинных атрибутов.
Не может быть больше 255.

Если равен 0, атрибут предполагается tightly packed, что означает 

Это общая длина байтов в массиве

#### - offset
`GLintptr` - указывает отступ в байтах от первого компонента в вершинном массиве.
Должен быть кратен на длине байтов типа.

### Заметки

> Максимальное кол-во атрибутов на вершине зависит от видеокарты.
> Можно узнать через `gl.getParameter(gl.MAX_VERTEX_ATTRIBS)`

